webpackJsonp([9,8],{0:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=o(10),s=n(i),a=o(62),r=n(a),u=o(79),l=n(u),c=o(80),f=n(c),d=o(4),m=n(d),p=o(9),h=(n(p),o(33)),g=n(h),v=o(35),w=n(v);o(47),s.default.use(r.default),s.default.use(l.default),s.default.use(f.default),m.default.ajaxSettings.crossDomain=!0,window.sessionStorage.user&&w.default.dispatch("setUserInfo",JSON.parse(window.sessionStorage.user)),window.sessionStorage.info&&w.default.dispatch("setNotiNum",window.sessionStorage.info);var _=new f.default({routes:g.default});_.beforeEach(function(t,e,o){t.matched.some(function(t){return t.meta.requiresAuth})?w.default.state.user.userInfo.userId?o():o({path:"/login",query:{redirect:t.fullPath}}):o()}),new s.default({router:_,store:w.default}).$mount("#app")},5:function(t,e,o){o(48);var n=o(1)(o(22),o(68),null,null);t.exports=n.exports},6:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getTimeStr=e.getTabInfo=void 0;var i=o(64),s=n(i),a=function(t,e,o,n){var i="",s="";if(o)i="置顶",s="top";else if(e)i="精华",s="good";else switch(t){case"share":i="分享",s="share";break;case"ask":i="问答",s="ask";break;case"job":i="招聘",s="job";break;default:i="暂无",s="default"}return n?s:i},r=function(t){var e=new s.default,o=e.format(t,"zh_CN");return o};e.getTabInfo=a,e.getTimeStr=r},7:function(t,e,o){t.exports=o.p+"static/img/loading.00839a0.gif"},9:function(t,e,o){o(49);var n=o(1)(o(28),o(69),null,null);t.exports=n.exports},13:function(t,e,o){o(58);var n=o(1)(o(23),o(78),"data-v-fbae34e2",null);t.exports=n.exports},22:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={replace:!0,name:"hello",props:["theme"],data:function(){return{open:!1,docked:!0,title:"全部",userInfo:{}}},mounted:function(){this.$store.state.user.userInfo&&(this.userInfo=this.$store.state.user.userInfo)},methods:{toggle:function(t){this.open=!this.open,this.docked=!t},channel:function(t){this.title=t},loginOut:function(){this.docked=!1,window.window.sessionStorage.removeItem("user"),window.window.sessionStorage.removeItem("info"),setTimeout(function(){history.go(0)},200)}}}},23:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),s=n(i);e.default={name:"toTop",props:["page"],components:{},filters:{},data:function(){return{show:!1,target:null}},mounted:function(){var t=this;"list"==this.page?this.target=".demo-infinite-container":this.target=window,(0,s.default)(this.target).on("scroll",function(){(0,s.default)(t.target).scrollTop()>200?t.show=!0:t.show=!1})},methods:{toTop:function(){return(0,s.default)(this.target).scrollTop(0),this.show=!1,!1}},watch:{}}},28:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(11),s=n(i),a=o(4),r=n(a),u=o(6),l=o(5),c=n(l),f=o(13),d=n(f);e.default={name:"app",components:{mhead:c.default,totop:d.default},filters:{getTimeStr:function(t){return(0,u.getTimeStr)(t)}},data:function(){return{title:"全部",num:20,loading:!1,scroller:null,success:!1,topics:[],searchKey:{page:1,limit:20,tab:"all",mdrender:!0},refreshing:!1,trigger:null}},mounted:function(){this.scroller=this.$el,this.trigger=this.$el,this.$route.query&&this.$route.query.tab&&(this.searchKey.tab=this.$route.query.tab),window.window.sessionStorage.searchKey&&window.window.sessionStorage.tab===this.searchKey.tab?(this.topics=JSON.parse(window.window.sessionStorage.topics),this.searchKey=JSON.parse(window.window.sessionStorage.searchKey),this.success=!0,this.$nextTick(function(){(0,r.default)(".demo-infinite-container").scrollTop(window.window.sessionStorage.scrollTop)})):this.getTopics()},beforeRouteLeave:function(t,e,o){"topic"===t.name&&(window.window.sessionStorage.scrollTop=(0,r.default)(".demo-infinite-container").scrollTop(),window.window.sessionStorage.topics=(0,s.default)(this.topics),window.window.sessionStorage.searchKey=(0,s.default)(this.searchKey),window.window.sessionStorage.tab=e.query.tab||"all"),(0,r.default)(window).off("scroll"),o()},beforeRouteEnter:function(t,e,o){"topic"!==e.name&&window.window.sessionStorage.tab&&(window.window.sessionStorage.removeItem("topics"),window.window.sessionStorage.removeItem("searchKey"),window.window.sessionStorage.removeItem("tab")),o()},methods:{loadMore:function(){var t=this;this.loading=!0,setTimeout(function(){t.searchKey.limit+=20,t.getTopics(),t.loading=!1},2e3)},getTopics:function(){var t=this;r.default.get("https://cnodejs.org/api/v1/topics?"+r.default.param(this.searchKey),function(e){t.topics=e.data,t.success=!0})},getTabInfo:function(t,e,o,n){return(0,u.getTabInfo)(t,e,o,n)},refresh:function(){var t=this;this.refreshing=!0,setTimeout(function(){t.getTopics(),t.refreshing=!1},2e3)}},watch:{$route:function(t,e){this.success=!1,this.searchKey.tab=t.query.tab,this.searchKey.limit=20,this.getTopics()}}}},33:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){!function(){t(o(9))}(o)},i=function(t){o.e(1,function(){t(o(18))})},s=[{path:"/",name:"loading",component:i},{path:"/list",name:"list",component:n},{path:"/topic/:id",name:"topic",component:function(t){o.e(0,function(){t(o(20))})}},{path:"/add",name:"add",component:function(t){o.e(7,function(){t(o(15))})},meta:{requiresAuth:!0}},{path:"/login",name:"login",component:function(t){o.e(4,function(){t(o(19))})}},{path:"/user/:loginname",name:"user",component:function(t){o.e(3,function(){t(o(21))})}},{path:"/info",name:"info",component:function(t){o.e(5,function(){t(o(17))})}},{path:"/about",name:"about",component:function(t){o.e(2,function(){t(o(14))})}},{path:"/collection",name:"collection",component:function(t){o.e(6,function(){t(o(16))})}},{path:"*",component:i}];e.default=s},34:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={state:{notiNum:null},getters:{getNotiNum:function(t){return t.notiNum}},mutations:{setNotiNum:function(t,e){t.notiNum=e}},actions:{setNotiNum:function(t,e){var o=t.commit;o("setNotiNum",e)}}};e.default=o},35:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(10),s=n(i),a=o(81),r=n(a),u=o(36),l=n(u),c=o(34),f=n(c);s.default.use(r.default);var d=new r.default.Store({modules:{user:l.default,info:f.default}});e.default=d},36:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={state:{userInfo:{}},getters:{getUserInfo:function(t){return t.userInfo}},mutations:{setUserInfo:function(t,e){t.userInfo=e}},actions:{setUserInfo:function(t,e){var o=t.commit;o("setUserInfo",e)}}};e.default=o},47:function(t,e){},48:function(t,e){},49:function(t,e){},58:function(t,e){},68:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"header"},[t.theme?o("mu-appbar",{attrs:{title:t.theme,id:"topic"}},[o("mu-icon-button",{attrs:{slot:"left",icon:"menu"},on:{click:function(e){t.toggle(!0)}},slot:"left"}),t._v(" "),o("mu-icon-button",{attrs:{slot:"right",icon:"add"},slot:"right"})],1):t._e(),t._v(" "),t.theme?t._e():o("mu-appbar",{attrs:{title:t.title,id:"topic"}},[o("mu-icon-button",{attrs:{slot:"left",icon:"menu"},on:{click:function(e){t.toggle(!0)}},slot:"left"}),t._v(" "),o("mu-icon-button",{attrs:{slot:"right",icon:"add"},slot:"right"})],1),t._v(" "),o("router-link",{staticStyle:{width:"50px",height:"50px",position:"absolute",right:"0",top:"0","z-index":"555"},attrs:{to:{name:"add"}}}),t._v(" "),o("mu-drawer",{attrs:{open:t.open,docked:t.docked},on:{close:function(e){t.toggle()}}},[o("mu-list",{on:{itemClick:function(e){t.docked?"":t.toggle()}}},[t.userInfo.loginname?t._e():o("router-link",{attrs:{to:{name:"login"}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"登陆"}},[o("mu-icon",{attrs:{slot:"left",value:"person_outline"},slot:"left"})],1)],1),t._v(" "),t.userInfo.loginname?[o("router-link",{attrs:{to:{name:"user",params:{loginname:t.userInfo.loginname}}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:t.userInfo.loginname}},[o("mu-icon",{attrs:{slot:"left",value:"person"},slot:"left"})],1)],1),t._v(" "),o("router-link",{attrs:{to:{name:"info"}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"消息"}},[o("mu-icon",{attrs:{slot:"left",value:"warning"},slot:"left"}),t._v(" "),o("mu-badge",{attrs:{slot:"after",content:this.$store.state.info.notiNum,primary:this.$store.state.info.notiNum>0,circle:""},slot:"after"})],1)],1),t._v(" "),o("router-link",{attrs:{to:{name:"collection"}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"收藏"}},[o("mu-icon",{attrs:{slot:"left",value:"grade"},slot:"left"})],1)],1),t._v(" "),o("mu-list-item",{attrs:{title:"退出"},on:{click:t.loginOut}},[o("mu-icon",{attrs:{slot:"left",value:"undo"},slot:"left"})],1)]:t._e(),t._v(" "),o("mu-divider"),t._v(" "),o("router-link",{attrs:{to:{name:"list",query:{tab:"all"}}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"全部"},on:{click:function(e){t.channel("全部")}}},[o("mu-icon",{attrs:{slot:"left",value:"list"},slot:"left"})],1)],1),t._v(" "),o("router-link",{attrs:{to:{name:"list",query:{tab:"good"}}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"精华"},on:{click:function(e){t.channel("精华")}}},[o("mu-icon",{attrs:{slot:"left",value:"thumb_up"},slot:"left"})],1)],1),t._v(" "),o("router-link",{attrs:{to:{name:"list",query:{tab:"share"}}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"分享"},on:{click:function(e){t.channel("分享")}}},[o("mu-icon",{attrs:{slot:"left",value:"share"},slot:"left"})],1)],1),t._v(" "),o("router-link",{attrs:{to:{name:"list",query:{tab:"ask"}}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"问答"},on:{click:function(e){t.channel("问答")}}},[o("mu-icon",{attrs:{slot:"left",value:"live_help"},slot:"left"})],1)],1),t._v(" "),o("router-link",{attrs:{to:{name:"list",query:{tab:"job"}}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"招聘"},on:{click:function(e){t.channel("招聘")}}},[o("mu-icon",{attrs:{slot:"left",value:"local_mall"},slot:"left"})],1)],1),t._v(" "),o("mu-divider"),t._v(" "),o("router-link",{attrs:{to:{name:"about"}},nativeOn:{click:function(e){t.open=!1}}},[o("mu-list-item",{attrs:{title:"关于"},on:{click:function(e){t.channel("关于")}}},[o("mu-icon",{attrs:{slot:"left",value:"info"},slot:"left"})],1)],1)],2)],1)],1)},staticRenderFns:[]}},69:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app demo-infinite-container"},[n("mhead",{attrs:{title:t.title}}),t._v(" "),t.success?n("section",{staticClass:"pt56 demo-refresh-container"},[n("mu-refresh-control",{attrs:{refreshing:t.refreshing,trigger:t.trigger},on:{refresh:t.refresh}}),t._v(" "),n("mu-list",[t._l(t.topics,function(e){return[n("router-link",{attrs:{to:{name:"topic",params:{id:e.id}}}},[n("mu-list-item",[n("div",{staticClass:"title",attrs:{title:t.getTabInfo(e.tab,e.good,e.top,!0)},domProps:{innerHTML:t._s(e.title)}}),t._v(" "),n("mu-flexbox",{staticClass:"content"},[n("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[n("mu-avatar",{attrs:{src:e.author.avatar_url}})],1),t._v(" "),n("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"7"}},[n("mu-flexbox",[n("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[t._v("\n\t\t\t\t\t                      \t"+t._s(e.author.loginname)+"\n\t\t\t\t\t                    ")]),t._v(" "),n("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[n("span",{staticClass:"blue"},[t._v(t._s(e.reply_count))]),t._v("/"),n("span",{staticClass:"grey"},[t._v(t._s(e.visit_count))])])],1),t._v(" "),n("mu-flexbox",[n("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[t._v("\n\t\t\t\t\t                      \t"+t._s(t._f("getTimeStr")(e.create_at))+"\n\t\t\t\t\t                    ")]),t._v(" "),n("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[t._v("\n\t\t\t\t\t                      \t"+t._s(t._f("getTimeStr")(e.last_reply_at))+"\n\t\t\t\t\t                    ")])],1)],1)],1)],1)],1),t._v(" "),n("mu-divider")]})],2),t._v(" "),n("mu-infinite-scroll",{attrs:{scroller:t.scroller,loading:t.loading},on:{load:t.loadMore}}),t._v(" "),n("totop",{attrs:{page:"list"}})],1):t._e(),t._v(" "),t.success?t._e():n("div",{staticClass:"error"},[n("img",{attrs:{src:o(7),alt:""}})])],1)},staticRenderFns:[]}},78:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"toTop",on:{click:t.toTop}},[o("mu-icon",{attrs:{value:"publish"}})],1)},staticRenderFns:[]}},82:function(t,e){}});